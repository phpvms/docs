"use strict";(self.webpackChunkphpvms_docs=self.webpackChunkphpvms_docs||[]).push([[5492],{8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var s=t(6540);const a={},i=s.createContext(a);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(i.Provider,{value:n},e.children)}},9534:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"developers/environment","title":"Environment Configuration","description":"This is for running a local configuration, for running unit-tests, etc.","source":"@site/docs/developers/environment.md","sourceDirName":"developers","slug":"/developers/environment","permalink":"/developers/environment","draft":false,"unlisted":false,"editUrl":"https://github.com/phpvms/docs/tree/master/docs/developers/environment.md","tags":[],"version":"current","frontMatter":{"id":"environment","title":"Environment Configuration"},"sidebar":"docs","previous":{"title":"Maps and Layouts","permalink":"/customize/maps"},"next":{"title":"Building Assets","permalink":"/developers/building-assets"}}');var a=t(4848),i=t(8453);const o={id:"environment",title:"Environment Configuration"},r="Environment Configuration",l={},d=[{value:"Creating and Resetting the Environment with docker",id:"creating-and-resetting-the-environment-with-docker",level:2},{value:"Resetting the Environment",id:"resetting-the-environment",level:3},{value:"Updating",id:"updating",level:3},{value:"Without Docker",id:"without-docker",level:2},{value:"Laravel Valet",id:"laravel-valet",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"environment-configuration",children:"Environment Configuration"})}),"\n",(0,a.jsx)(n.p,{children:"This is for running a local configuration, for running unit-tests, etc."}),"\n",(0,a.jsxs)(n.admonition,{title:"This is just how I work on phpVMS, to quickly reset the database and",type:"info",children:[(0,a.jsx)(n.p,{children:"test/develop items locally, without having to transfer files anywhere. I mainly\nuse the Docker Compose setup"}),(0,a.jsxs)(n.p,{children:["If you're on Windows, I highly recommend installing WSL with your distro of\nchoice (I use Ubuntu). If you don't have ",(0,a.jsx)(n.code,{children:"make"})," available, open the ",(0,a.jsx)(n.code,{children:"Makefile"}),"\nand look for the commands to run for the individual commands of what you're\ntrying to run. :::"]}),(0,a.jsx)(n.admonition,{title:"You may want to disable caching during development phases to ensure your",type:"info",children:(0,a.jsxs)(n.p,{children:["changes are applied correctly, as caching cna prevent changes from taking\neffect. To do this, set ",(0,a.jsx)(n.code,{children:"CACHE_DRIVER=null"})," in your ",(0,a.jsx)(n.code,{children:".env"})," file."]})})]}),"\n",(0,a.jsxs)(n.admonition,{title:"We strongly recommend reading the",type:"info",children:[(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"https://laravel.com/docs/10.x",children:"Laravel Documentation"}),", as it's more detailed\nand up-to-date. Since phpVMS is based on Laravel, the installation process is\nthe same. In addition, you can simply use the ",(0,a.jsx)(n.code,{children:"php artisan phpvms:dev-install"}),"\ncommand to set up a development database. :::"]}),(0,a.jsx)(n.h2,{id:"creating-and-resetting-the-environment-with-docker",children:"Creating and Resetting the Environment with docker"}),(0,a.jsxs)(n.p,{children:["We are using ",(0,a.jsx)(n.a,{href:"https://laravel.com/docs/10.x/sail#main-content",children:"Laravel Sail"}),"\nwhich provides a simple way to set up and manage a local development environment\nfor laravel apps using Docker."]}),(0,a.jsx)(n.p,{children:"Before you begin, ensure you have docker installed on your system"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'git clone https://github.com/nabeelio/phpvms.git phpvms\ncd phpvms\ndocker run --rm \\\n    -u "$(id -u):$(id -g)" \\\n    -v "$(pwd):/var/www/html" \\\n    -w /var/www/html \\\n    laravelsail/php83-composer:latest \\\n    composer install --ignore-platform-reqs\n\n./vendor/bin/sail up -d\n./vendor/bin/sail artisan phpvms:dev-install\n'})}),(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"phpvms:dev-install"})," command creates the ",(0,a.jsx)(n.code,{children:".env"})," config file. It will then\nrun the migrations, and install the sample seed data, which is located in\n",(0,a.jsx)(n.code,{children:"app/Database/seeds/sample.yml"})]}),(0,a.jsx)(n.p,{children:"Then to reset the database and reinstall the dev data:"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"./vendor/bin/sail artisan phpvms:dev-install --reset-db\n"})}),(0,a.jsxs)(n.p,{children:["This does require sqlite. If you want to use MySQL, you need to run the phpVMS\ninstaller, so it can generate the config files for MySQL (or you can modify the\ngenerated ",(0,a.jsx)(n.code,{children:".env"}),"), then you can run the above command to reset the database and\nmigrations in MySQL."]}),(0,a.jsx)(n.h3,{id:"resetting-the-environment",children:"Resetting the Environment"}),(0,a.jsx)(n.p,{children:"To reset the database/clear cache, use this command."}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"./vendor/bin/sail artisan database:create --reset\n./vendor/bin/sail artisan migrate --seed\n"})}),(0,a.jsxs)(n.p,{children:["You can run the ",(0,a.jsx)(n.code,{children:"reload-db"})," command as much as you want. If you log in using the\ndefault login (",(0,a.jsx)(n.a,{href:"mailto:admin@phpvms.net",children:"admin@phpvms.net"}),"), this won't log you out, it'll just reload the\ndatabase with all the sample data (from app/Database/seeds/sample.yml)"]}),(0,a.jsx)(n.h3,{id:"updating",children:"Updating"}),(0,a.jsx)(n.p,{children:"Extract files and run the migrations:"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"git pull origin dev\n./vendor/bin/sail artisan migrate\n"})}),(0,a.jsx)(n.hr,{}),(0,a.jsx)(n.h2,{id:"without-docker",children:"Without Docker"}),(0,a.jsxs)(n.p,{children:["If you don't want to use Docker, you can use other software like\n",(0,a.jsx)(n.a,{href:"https://herd.laravel.com",children:"Laravel Herd"})," (Mac/Windows) or\n",(0,a.jsx)(n.a,{href:"https://laragon.org/",children:"Laragon"})," (Windows only)."]}),(0,a.jsx)(n.p,{children:"There are many tutorials on how to install Laravel applications with these\nsoftwares, but here are the basics:"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/nabeelio/phpvms.git phpvms\ncd phpvms\n\ncomposer install\nphp artisan phpvms:dev-install\n"})}),(0,a.jsxs)(n.p,{children:["This does require sqlite. If you want to use MySQL, you need to run the phpVMS\ninstaller, so it can generate the config files for MySQL (or you can modify the\ngenerated ",(0,a.jsx)(n.code,{children:".env"}),"), then you can run the above command to reset the database and\nmigrations in MySQL."]}),(0,a.jsx)(n.hr,{}),(0,a.jsx)(n.h2,{id:"laravel-valet",children:"Laravel Valet"}),(0,a.jsxs)(n.p,{children:["If you don't want to use ",(0,a.jsx)(n.code,{children:"docker-compose"}),", easiest way to load locally is to\ninstall ",(0,a.jsx)(n.a,{href:"https://laravel.com/docs/5.5/valet",children:"Laravel Valet"})," (if you're running a\nMac). Follow the instructions to install; you install it, go to your phpvms\ndirectory, and run:"]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"valet link phpvms\n"})}),(0,a.jsxs)(n.p,{children:["Now going to ",(0,a.jsx)(n.code,{children:"http://phpvms.test"})," should work. If you want to use mysql, follow\nthe valet directions on installing mysql (",(0,a.jsx)(n.code,{children:"brew install mysql"}),") and then update\nthe ",(0,a.jsx)(n.code,{children:".env"})," file to point to the mysql."]}),(0,a.jsxs)(n.p,{children:["The default username and password are ",(0,a.jsx)(n.code,{children:"admin@phpvms.net"})," and ",(0,a.jsx)(n.code,{children:"admin"}),". To see the\navailable users in the development environment,\n",(0,a.jsx)(n.a,{href:"https://github.com/nabeelio/phpvms/blob/master/app/Database/seeds/sample.yml#L11",children:"see this file"})]}),(0,a.jsxs)(n.p,{children:["There is no reason you can't use ",(0,a.jsx)(n.a,{href:"https://www.mamp.info/en",children:"MAMP"})," or\n",(0,a.jsx)(n.a,{href:"https://www.apachefriends.org",children:"XAMPP"}),", or if you're feeling fancy, using Docker\nor configuring any webservers yourself."]})]})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}}}]);