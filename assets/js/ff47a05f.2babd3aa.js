"use strict";(self.webpackChunkphpvms_docs=self.webpackChunkphpvms_docs||[]).push([[7230],{2529:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/cpanel-cron-d71620fcec313b9c738fadf4fd869c0a.png"},2552:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/cron-disabled-2f02c69a98905738f23c516ca69ef546.png"},4235:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"installation/cron","title":"Cron/Scheduled Tasks","description":"In order for some phpVMS features to work, a cronjob is required to be setup.","source":"@site/docs/installation/cron.md","sourceDirName":"installation","slug":"/installation/cron","permalink":"/installation/cron","draft":false,"unlisted":false,"editUrl":"https://github.com/phpvms/docs/tree/master/docs/installation/cron.md","tags":[],"version":"current","frontMatter":{"id":"cron","title":"Cron/Scheduled Tasks"},"sidebar":"docs","previous":{"title":"Upgrading from 5.x","permalink":"/installation/legacy-upgrade"},"next":{"title":"Updating","permalink":"/installation/updating"}}');var o=t(4848),s=t(8453);const r={id:"cron",title:"Cron/Scheduled Tasks"},a=void 0,c={},l=[{value:"Configuration on a Server",id:"configuration-on-a-server",level:2},{value:"cPanel Configuration",id:"cpanel-configuration",level:2},{value:"Web Cron",id:"web-cron",level:2},{value:"Guides on setting up a cron job",id:"guides-on-setting-up-a-cron-job",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"In order for some phpVMS features to work, a cronjob is required to be setup.\nSome of the features that rely on cronjobs include:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Job queue tasks (sending emails, notifications)"}),"\n",(0,o.jsx)(n.li,{children:"Finances"}),"\n",(0,o.jsx)(n.li,{children:"vaCentral features"}),"\n"]}),"\n",(0,o.jsxs)(n.admonition,{title:"If you can't run it once a minute, the lowest interval possible is fine,",type:"note",children:[(0,o.jsx)(n.p,{children:"but should be in 5 minute increments, since there are tasks that run at 5,15,\nand 30 minute intervals. :::"}),(0,o.jsxs)(n.admonition,{title:'Info about "Shared Hosting" Many hosts limit the usage of cron, either by',type:"tip",children:[(0,o.jsx)(n.p,{children:'limiting it directly or limiting php extensions needed by cron. So if you are\nplanning to use a "Shared Hosting", better to focus on cron and email settings\nfirst (specially if they offer a money back quarantee), if cron is failing and\nyou can not get it working properly consider finding a different service\nprovider. Even some hosts limit WebCron services, be advised, without a working\ncron you will not get the best of phpVMS v7. :::'}),(0,o.jsx)(n.hr,{}),(0,o.jsx)(n.h2,{id:"configuration-on-a-server",children:"Configuration on a Server"}),(0,o.jsxs)(n.p,{children:["If you have SSH and ",(0,o.jsx)(n.code,{children:"crontab"})," access, this is the easiest way to configure the\ncron job. You need the path to the ",(0,o.jsx)(n.code,{children:"bin/cron"})," file that's in the root of the\nphpVMS install. After that, add a cronjob that runs once a minute. Do not forget\nto include the username, for example, using ",(0,o.jsx)(n.code,{children:"crontab -e"}),":"]}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# THIS IS AN EXAMPLE\n* * * * * php /path/to/phpvms/bin/cron >> /dev/null 2>&1\n"})}),(0,o.jsxs)(n.p,{children:["If your server has access to ",(0,o.jsx)(n.code,{children:"proc_open"}),", you can also use the Laravel schedule\nrunner:"]}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# THIS IS AN EXAMPLE\n* * * * * php /path/to/phpvms/artisan schedule:run >> /dev/null 2>&1\n"})}),(0,o.jsx)(n.hr,{}),(0,o.jsx)(n.h2,{id:"cpanel-configuration",children:"cPanel Configuration"}),(0,o.jsxs)(n.p,{children:["phpVMS, in the admin panel, can suggest a cron path/command for you, under\n",(0,o.jsx)(n.code,{children:"Admin -> Maintenance"}),". However, before trying that, try setting it up according\nto your host's instructions."]}),(0,o.jsxs)(n.admonition,{title:'Note the "Domain Specific Example" Many hosts offer multiple PHP',type:"tip",children:[(0,o.jsx)(n.p,{children:"versions, make sure to use the path to the PHP 7.x version in the cronjob.\nContact your host! Point them to this page. The example below uses PHP 7.4. :::"}),(0,o.jsx)(n.p,{children:'With cPanel, select "Once Per Minute" under "Common Settings", and you can use a\nsimilar command.'}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"/usr/local/bin/ea-php74 -q /your/path/to/phpvms/bin/cron\n"})}),(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:t(2529).A+"",width:"737",height:"900"})}),(0,o.jsx)(n.hr,{}),(0,o.jsx)(n.h2,{id:"web-cron",children:"Web Cron"}),(0,o.jsxs)(n.p,{children:["If you're unable to use the cron on your server, or want an easier setup, you\ncan use the web cron. To enable it, go to ",(0,o.jsx)(n.code,{children:"Maintenance"})," in the admin panel. It's\ndisabled by default:"]}),(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:t(2552).A+"",width:"1232",height:"179"})}),(0,o.jsx)(n.p,{children:"Clicking the enable button gives a URL that can be used in the web-cron service\nto hit:"}),(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:t(6093).A+"",width:"1244",height:"168"})}),(0,o.jsx)(n.p,{children:"This URL can also be reset as the ID at the end if generated by random, for\nsecurity purposes."}),(0,o.jsx)(n.hr,{}),(0,o.jsx)(n.h2,{id:"guides-on-setting-up-a-cron-job",children:"Guides on setting up a cron job"}),(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://help.fasthosts.co.uk/app/answers/detail/a_id/2198/~/setting-up-cron-jobs-in-cpanel",children:"Adding a cronjob in cPanel"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://www.cyberciti.biz/faq/how-do-i-add-jobs-to-cron-under-linux-or-unix-oses/",children:"Adding a cronjob on Linux"})}),"\n"]})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},6093:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/cron-enabled-2be755bf6867a25c8f26642ca4217583.png"},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var i=t(6540);const o={},s=i.createContext(o);function r(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);