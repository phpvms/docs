"use strict";(self.webpackChunkphpvms_docs=self.webpackChunkphpvms_docs||[]).push([[7230],{2529:(n,e,t)=>{t.d(e,{A:()=>o});const o=t.p+"assets/images/cpanel-cron-d71620fcec313b9c738fadf4fd869c0a.png"},2552:(n,e,t)=>{t.d(e,{A:()=>o});const o=t.p+"assets/images/cron-disabled-2f02c69a98905738f23c516ca69ef546.png"},4235:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"installation/cron","title":"Cron/Scheduled Tasks","description":"In order for some phpVMS features to work, a cronjob is required to be setup.","source":"@site/docs/installation/cron.md","sourceDirName":"installation","slug":"/installation/cron","permalink":"/installation/cron","draft":false,"unlisted":false,"editUrl":"https://github.com/phpvms/docs/tree/master/docs/installation/cron.md","tags":[],"version":"current","frontMatter":{"id":"cron","title":"Cron/Scheduled Tasks"},"sidebar":"docs","previous":{"title":"Upgrading from 5.x","permalink":"/installation/legacy-upgrade"},"next":{"title":"Updating","permalink":"/installation/updating"}}');var i=t(4848),s=t(8453);const r={id:"cron",title:"Cron/Scheduled Tasks"},a=void 0,c={},l=[{value:"Info about &quot;Shared Hosting&quot;",id:"info-about-shared-hosting",level:2},{value:"Configuration on a Server",id:"configuration-on-a-server",level:2},{value:"cPanel Configuration",id:"cpanel-configuration",level:2},{value:"Web Cron",id:"web-cron",level:2},{value:"Guides on setting up a cron job",id:"guides-on-setting-up-a-cron-job",level:2}];function d(n){const e={a:"a",admonition:"admonition",code:"code",h2:"h2",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.p,{children:"In order for some phpVMS features to work, a cronjob is required to be setup.\nSome of the features that rely on cronjobs include:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Job queue tasks (sending emails, notifications)"}),"\n",(0,i.jsx)(e.li,{children:"Finances"}),"\n",(0,i.jsx)(e.li,{children:"vaCentral features"}),"\n"]}),"\n",(0,i.jsx)(e.admonition,{type:"note",children:(0,i.jsx)(e.p,{children:"If you can't run it once a minute, the lowest interval possible is fine, but\nshould be in 5 minute increments, since there are tasks that run at 5,15, and 30\nminute intervals."})}),"\n",(0,i.jsx)(e.h2,{id:"info-about-shared-hosting",children:'Info about "Shared Hosting"'}),"\n",(0,i.jsx)(e.p,{children:'Many hosts limit the usage of cron, either by limiting it directly or limiting\nphp extensions needed by cron. So if you are planning to use a "Shared Hosting",\nbetter to focus on cron and email settings first (specially if they offer a\nmoney back quarantee), if cron is failing and you can not get it working\nproperly consider finding a different service provider. Even some hosts limit\nWebCron services, be advised, without a working cron you will not get the best\nof phpVMS v7.'}),"\n",(0,i.jsx)(e.h2,{id:"configuration-on-a-server",children:"Configuration on a Server"}),"\n",(0,i.jsxs)(e.p,{children:["If you have SSH and ",(0,i.jsx)(e.code,{children:"crontab"})," access, this is the easiest way to configure the\ncron job. You need the path to the ",(0,i.jsx)(e.code,{children:"bin/cron"})," file that's in the root of the\nphpVMS install. After that, add a cronjob that runs once a minute. Do not forget\nto include the username, for example, using ",(0,i.jsx)(e.code,{children:"crontab -e"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# THIS IS AN EXAMPLE\n* * * * * php /path/to/phpvms/bin/cron >> /dev/null 2>&1\n"})}),"\n",(0,i.jsxs)(e.p,{children:["If your server has access to ",(0,i.jsx)(e.code,{children:"proc_open"}),", you can also use the Laravel schedule\nrunner:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# THIS IS AN EXAMPLE\n* * * * * php /path/to/phpvms/artisan schedule:run >> /dev/null 2>&1\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"cpanel-configuration",children:"cPanel Configuration"}),"\n",(0,i.jsxs)(e.p,{children:["phpVMS, in the admin panel, can suggest a cron path/command for you, under\n",(0,i.jsx)(e.code,{children:"Admin -> Maintenance"}),". However, before trying that, try setting it up according\nto your host's instructions."]}),"\n",(0,i.jsx)(e.admonition,{type:"tip",children:(0,i.jsx)(e.p,{children:'Note the "Domain Specific Example" Many hosts offer multiple PHP versions, make\nsure to use the path to the PHP 7.x version in the cronjob. Contact your host!\nPoint them to this page. The example below uses PHP 7.4.'})}),"\n",(0,i.jsx)(e.p,{children:'With cPanel, select "Once Per Minute" under "Common Settings", and you can use a\nsimilar command.'}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"/usr/local/bin/ea-php74 -q /your/path/to/phpvms/bin/cron\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:t(2529).A+"",width:"737",height:"900"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"web-cron",children:"Web Cron"}),"\n",(0,i.jsxs)(e.p,{children:["If you're unable to use the cron on your server, or want an easier setup, you\ncan use the web cron. To enable it, go to ",(0,i.jsx)(e.code,{children:"Maintenance"})," in the admin panel. It's\ndisabled by default:"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:t(2552).A+"",width:"1232",height:"179"})}),"\n",(0,i.jsx)(e.p,{children:"Clicking the enable button gives a URL that can be used in the web-cron service\nto hit:"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:t(6093).A+"",width:"1244",height:"168"})}),"\n",(0,i.jsx)(e.p,{children:"This URL can also be reset as the ID at the end if generated by random, for\nsecurity purposes."}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"guides-on-setting-up-a-cron-job",children:"Guides on setting up a cron job"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://help.fasthosts.co.uk/app/answers/detail/a_id/2198/~/setting-up-cron-jobs-in-cpanel",children:"Adding a cronjob in cPanel"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://www.cyberciti.biz/faq/how-do-i-add-jobs-to-cron-under-linux-or-unix-oses/",children:"Adding a cronjob on Linux"})}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},6093:(n,e,t)=>{t.d(e,{A:()=>o});const o=t.p+"assets/images/cron-enabled-2be755bf6867a25c8f26642ca4217583.png"},8453:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>a});var o=t(6540);const i={},s=o.createContext(i);function r(n){const e=o.useContext(s);return o.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:r(n.components),o.createElement(s.Provider,{value:e},n.children)}}}]);